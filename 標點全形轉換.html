<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è½‰æ›å…¨å½¢æ¨™é»</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React + ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body { font-family: "Microsoft JhengHei", "Heiti TC", sans-serif; }
        .spin { animation: spin 1s linear infinite; }
        @keyframes spin { 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-slate-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        /* --- ICON å…ƒä»¶ --- */
        const IconType = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="text-blue-600"><polyline points="4 7 4 4 20 4 20 7"></polyline><line x1="9" y1="20" x2="15" y2="20"></line><line x1="12" y1="4" x2="12" y2="20"></line></svg>
        );
        const IconTrash2 = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="mr-1"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
        );
        const IconCopy = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
        );
        const IconCheck = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="20 6 9 17 4 12"></polyline></svg>
        );

        /* --- ä¸»ç¨‹å¼ --- */
        function App() {
            const [inputText, setInputText] = useState('');
            const [outputText, setOutputText] = useState('');
            const [isCopied, setIsCopied] = useState(false);

            /* --- æ¨™é»å…¨å½¢è½‰æ› --- */
            const convertPunctuation = (text) => {
                let result = text;
                const punctMap = {
                    ',': 'ï¼Œ', '.': 'ã€‚', '?': 'ï¼Ÿ', '!': 'ï¼', ':': 'ï¼š', ';': 'ï¼›',
                    '(': 'ï¼ˆ', ')': 'ï¼‰', '[': 'ã€', ']': 'ã€‘', '{': 'ï½›', '}': 'ï½',
                    '<': 'ã€Š', '>': 'ã€‹', '/': 'ï¼', '\\': 'ï¼¼', '|': 'ï½œ',
                    '@': 'ï¼ ', '#': 'ï¼ƒ', '$': 'ï¼„', '%': 'ï¼…', '^': 'ï¸¿', '&': 'ï¼†',
                    '_': 'ï¼¿', '+': 'ï¼‹', '-': 'ï¼', '=': 'ï¼', '~': 'ï½', '`': 'â€µ',
                    'â€œ': 'ã€Œ', 'â€': 'ã€', 'â€˜': 'ã€', 'â€™': 'ã€'
                };

                result = result.replace(/[,.? !:;()\[\]{}<>\/\\|@#$%^&_+\-=~`â€œâ€â€˜â€™]/g, (m) => punctMap[m] || m);

                result = result.replace(/"/g, 'â€');
                result = result.replace(/'/g, 'â€™');

                return result;
            };

            /* --- ä¸»è¦è™•ç†ï¼šåªæœ‰çœç•¥è™Ÿ + æ¨™é»è½‰æ› --- */
            const handleConvert = (text) => {
                let processed = text;

                processed = processed.replace(/\.{6}/g, "â€¦â€¦");
                processed = processed.replace(/\.{3}/g, "â€¦â€¦");

                processed = convertPunctuation(processed);

                setOutputText(processed);
            };

            const handleInputChange = (e) => {
                const text = e.target.value;
                setInputText(text);
                handleConvert(text);
            };

            const handleCopy = () => {
                if (!outputText) return;
                navigator.clipboard.writeText(outputText).then(() => {
                    setIsCopied(true);
                    setTimeout(() => setIsCopied(false), 2000);
                });
            };

            const handlePaste = async () => {
                try {
                    const text = await navigator.clipboard.readText();
                    setInputText(text);
                    handleConvert(text);
                } catch {
                    alert("ç„¡æ³•è®€å–å‰ªè²¼ç°¿ï¼Œè«‹ç¢ºèªç€è¦½å™¨æ¬Šé™ï¼");
                }
            };

            const handleClear = () => {
                setInputText('');
                setOutputText('');
            };

            return (
                <div className="min-h-screen p-4 md:p-8 font-sans text-slate-800">
                    <div className="max-w-3xl mx-auto space-y-6">

                        {/* --- æ¨™é¡Œ --- */}
                        <div className="text-center space-y-2">
                            <h1 className="text-2xl md:text-3xl font-bold text-slate-900 flex items-center justify-center gap-2">
                                <IconType />
                                æ¨™é»ç¬¦è™Ÿå…¨è‡ªå‹•è½‰æ›å™¨
                            </h1>
                            <p className="text-slate-500 text-sm md:text-base">
                                è‡ªå‹•å°‡åŠå½¢æ¨™é» â†’ å…¨å½¢ï¼Œä¸¦çµ±ä¸€çœç•¥è™Ÿæ ¼å¼ã€‚
                            </p>
                        </div>

                        {/* --- ä¸»ä»‹é¢ --- */}
                        <div className="grid grid-rows-[1fr_auto_1fr] gap-4 h-[80vh] md:h-[70vh]">

                            {/* --- ä¸Šæ–¹è¼¸å…¥ --- */}
                            <div className="flex flex-col bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                                <div className="flex justify-between items-center px-4 py-2 bg-slate-100 border-b border-slate-200">
                                    <label className="text-sm font-semibold text-slate-600">
                                        è¼¸å…¥æ–‡å­—ï¼ˆåŠå½¢æ¨™é»ï¼‰
                                    </label>

                                    {inputText && (
                                        <button
                                            onClick={handleClear}
                                            className="text-xs flex items-center text-slate-400 hover:text-red-500 transition-colors"
                                        >
                                            <IconTrash2 /> æ¸…ç©º
                                        </button>
                                    )}
                                </div>

                                <textarea
                                    className="flex-1 p-4 resize-none outline-none text-base md:text-lg leading-relaxed"
                                    placeholder="è«‹åœ¨æ­¤è²¼ä¸Šæ–‡å­—ï¼Œç³»çµ±æœƒè‡ªå‹•è™•ç†..."
                                    value={inputText}
                                    onChange={handleInputChange}
                                    spellCheck="false"
                                />
                            </div>

                            {/* --- è²¼ä¸ŠæŒ‰éˆ• --- */}
                            <div className="flex justify-end mb-2">
                                <button
                                    onClick={handlePaste}
                                    className="px-4 py-2 rounded-lg bg-blue-600 text-white text-sm font-semibold shadow hover:bg-blue-700 transition"
                                >
                                    ğŸ“‹ è²¼ä¸Šå‰ªè²¼ç°¿
                                </button>
                            </div>

                            {/* --- ä¸‹æ–¹è¼¸å‡º --- */}
                            <div className="relative flex flex-col bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden group">
                                <div className="flex justify-between items-center px-4 py-2 bg-blue-50 border-b border-blue-100">
                                    <label className="text-sm font-semibold text-blue-800">è½‰æ›çµæœ</label>
                                    <button
                                        onClick={handleCopy}
                                        disabled={!outputText}
                                        className={`flex items-center gap-1.5 px-3 py-1 rounded-md text-xs font-medium transition-all duration-200 ${!outputText ? 'opacity-50 cursor-not-allowed text-slate-400' : isCopied ? 'bg-green-500 text-white' : 'bg-white text-blue-600 border border-blue-200 hover:bg-blue-50'}`}
                                    >
                                        {isCopied ? <><IconCheck className="w-3 h-3" /> å·²è¤‡è£½</> : <><IconCopy className="w-3 h-3" /> è¤‡è£½å…§å®¹</>}
                                    </button>
                                </div>
                                <textarea
                                    readOnly
                                    className="flex-1 p-4 resize-none outline-none bg-slate-50/50 text-base md:text-lg leading-relaxed text-slate-800 cursor-text"
                                    placeholder="è½‰æ›å¾Œçš„çµæœæœƒé¡¯ç¤ºåœ¨é€™è£¡..."
                                    value={outputText}
                                />
                            </div>

                        </div>

                        <div className="text-center text-xs text-slate-400">
                           <p>æ³¨æ„ï¼šç‰¹æ®Šæ•¸å­¸ç¬¦è™Ÿæˆ–ç¨‹å¼ç¢¼å»ºè­°åˆ†é–‹è™•ç†ï¼Œä»¥å…æ¨™é»è¢«æ„å¤–è½‰æ›ã€‚</p>
                           <p className="mt-1">ä¾†æºï¼šhttps://www.plurk.com/p/3hzo79yuvk</p>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
